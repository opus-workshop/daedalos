#!/usr/bin/env bash
#===============================================================================
# undod - Undo Watcher Daemon
#===============================================================================

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
LIB_DIR="${SCRIPT_DIR}/../lib"

source "${LIB_DIR}/common.sh"
source "${LIB_DIR}/database.sh"
source "${LIB_DIR}/backup.sh"
source "${LIB_DIR}/watch.sh"

# Initialize
init_database

# Run watch mode
cmd_watch "${1:-.}"
