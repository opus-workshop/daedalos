#!/usr/bin/env bash
# error-db - Error Pattern Database for Daedalos
#
# Every error is a lesson. Capture patterns and solutions for instant fixes.

set -euo pipefail

# Resolve symlinks to get the real script location
SCRIPT_PATH="${BASH_SOURCE[0]}"
while [[ -L "$SCRIPT_PATH" ]]; do
    SCRIPT_DIR="$(cd "$(dirname "$SCRIPT_PATH")" && pwd)"
    SCRIPT_PATH="$(readlink "$SCRIPT_PATH")"
    [[ "$SCRIPT_PATH" != /* ]] && SCRIPT_PATH="$SCRIPT_DIR/$SCRIPT_PATH"
done
SCRIPT_DIR="$(cd "$(dirname "$SCRIPT_PATH")" && pwd)"
LIB_DIR="$(dirname "$SCRIPT_DIR")/errordb"

# Ensure Python can find the module
export PYTHONPATH="${PYTHONPATH:-}:$(dirname "$SCRIPT_DIR")"

exec python3 -m errordb "$@"
